# Default values for k3s-app

# Global settings
global:
  imageRegistry: ghcr.io
  imagePullSecrets: []

# Frontend configuration
frontend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: dfanso/k3s-frontend
    tag: latest
    pullPolicy: Always
  
  service:
    type: ClusterIP
    port: 80
  
  resources:
    requests:
      memory: "32Mi"
      cpu: "10m"
    limits:
      memory: "64Mi"
      cpu: "50m"

# API configuration
api:
  enabled: true
  replicaCount: 2
  
  image:
    repository: dfanso/k3s-api
    tag: latest
    pullPolicy: Always
  
  service:
    type: ClusterIP
    port: 8000
  
  env:
    APP_VERSION: "1.0.0"
    ENVIRONMENT: "production"
    DEPLOY_COUNT: "1"
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

# Ingress configuration (nginx)
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
  hosts:
    - host: ""  # Empty for IP-based access
      paths:
        - path: /api(/|$)(.*)
          pathType: ImplementationSpecific
          service: api
        - path: /
          pathType: Prefix
          service: frontend
  tls: []

# Pod disruption budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# Autoscaling
autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# Nginx Ingress Controller (as dependency)
# Set to false if nginx-ingress is already installed on your cluster
ingress-nginx:
  enabled: false
  controller:
    service:
      type: LoadBalancer
    ingressClassResource:
      name: nginx
      enabled: true
      default: true

